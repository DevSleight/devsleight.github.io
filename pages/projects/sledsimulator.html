<!DOCTYPE html>

<html>
    <head>
        <title>Sled Simulator</title>
        <link rel="stylesheet" type="text/css" href="../../css/projectstyle.css">
        <link rel="stylesheet" href="../../scripts/styles/vs2015.css">
        <script src="../../scripts/highlight.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script src="../../scripts/codeboxopenclose.js"></script>
        <script>HideShowCodebox();</script>
    </head>
<body>

<!-- HEADER WITH MENU -->
<header>
    <navigation-menu>
    <ul class="shadow">
        <li>
            <a href="../../index.html" target="_self"> Home </a>
        </li>
        <li>
            <a href="../../index.html#projects" target="_self"> Projects </a>
        </li>
        <li>
            <a href="../about.html" target="_self"> About </a>
        </li>
        <li>
            <a href="../about.html#experience" target="_self"> Experience </a>
        </li>
        <li>
            <a href="../about.html#skills" target="_self"> Skills </a>
        </li>
    </ul>
    </navigation-menu>
</header>
<!-- END HEADER -->
<!-- PROFILE SECTION -->
<div id=header class="headertint image-top" style="background-image: url('../../images/SledSimulatorBanner.png')">
        <div id="project-logo" class="project-logo" style="background-image: url('../../images/SledSimulatorLogo.png')">
        </div>
        <div id="profile">
            <div id="profile-image">
                <a href="../../index.html">
                    <img src="../../images/profilePic.png">
                </a>
            </div>
            <p id="name">DevSleight</h1>
            <p id="title">Gameplay Programmer</h2>
        <!-- SOCIAL MEDIA LIST -->
        <ul class="social">
            <li>
                <!-- <a href="https://twitter.com/SleightDev" target="_blank" alt="twitter"> 
                    <i class="twitter">
                    </i>
                </a> -->
            </li>
        </ul>
        <!-- END SOCIAL MEDIA LIST -->
        </div>
</div>
<!-- END PROFILE SECTION -->
<div id="project" class="project-background" style="background-image: url('../../images/SledSimMapExampleBlur.png')">
    <div id="project-container">
        <h2>Project Overview</h2>
        <p>Sled Simulator is a game powered by the Roblox Engine where players earn currency by sledding down various maps, using that currency to upgrade their sleds and progress further down the hill. Inspired by games like "Shopping Cart Hero" and "Learn to Fly," it aims to break away from the stereotypical clicking mechanics prevalent in many Roblox simulators. Developed over six months, Sled Simulator has undergone numerous updates since its initial release giving me experience maintaining a live game.</p>
        
        <h2>Game Info</h2>
        <div id="game-info">
            <div id="game-info-left">
                <h3> Game link: <span class="li-answer"><a href="https://www.roblox.com/games/6279039046/Sled-Simulator-UPDATE-10-4" target="_blank">Sled Simulator</a></span></h3>
                <h3>Visits: <span class="li-answer">65M+</span></h3>
                <h3>Roles: <span class="li-answer">Programmer</span></h3>
                <h3>Time: <span class="li-answer">6 Months</span></h3>
                <h3>Date: <span class="li-answer">January 2021 - June 2021</span></h3>
                <h3>Team Size: <span class="li-answer">3</span></h3>
            </div>
            <div id="game-info-right">
                <h3>Genre: <span class="li-answer">Roblox Simulator</span></h3>
                <h3>Engine: <span class="li-answer">Roblox Studio</span></h3>
                <h3>Code Language: <span class="li-answer">Luau</span></h3>
            </div>
        </div>
        
        <h2>My Role</h2>
        <p> Sled Simulator was my first Roblox project and I was the sole programmer, which meant I had to learn on the job. While Roblox offers excellent <a href="https://create.roblox.com/docs" target="_blank"> documentation </a> and resources, including the developer forum and YouTube tutorials, I still made some significant mistakes since this was my first time working with an online multiplayer environment. </p>
        <p> I implemented all the core systems in the game, such as sledding mechanics, currency earning, saving progress, leaderboards, and unlocking sled parts. I also handled the programming for the user interface, tying most of these systems to the UI elements. </p>

        <h2> Gameplay </h2>
        <p> Players begin with a wooden board that has very low health but can quickly upgrade to the next tier. This design allows players to learn the game loop immediately, without the need for a tutorial. While sledding, players can see their speed, distance, health, armor, and remaining boost. If they are sledding together as a party, they will share the same stats for a more cohesive experience. </p>
        <img src="../../images/SledSimSleddingExample.png" alt="Sledding example">

        <h2>Live game</h2>
        <p> Sled Simulator was updated with larger, smaller updates and bug fixes for years after release. Some of the larger updates include: </p>
        <ul>
            <li> Console update added support for controllers so the game was playable on console. The main difficulty with this update was making the ui usable and intractable in an intuitive way. </li>
            <li> Party/group update which added a way to help friends by letting them sled with you on your sled. </li>
            <li> Summer update added a completely new map and a bunch of new sled parts to unlock for a new currency. </li>
            <li> Multiple seasonal events which added new sled parts to unlock for a limited time. These sleds were usually themed to the holiday. </li>
        </ul>

        <h2> Upgrading sleds </h2>
        <p> Players can upgrade their sled's health, armor, and boost, which also alters its appearance. Additionally, they can further customize the visuals by selecting a trail and a pet to accompany them on their adventures. </p>
        <img src="../../images/SledSimGarageExample.png" alt="Garage example">

        <p> To save and load player data, such as unlocked and equipped sleds, currencies, and distance reached, I used Roblox DataStores. The game saves data when the player leaves the game and during an autosave every five minutes. However, when too many players' data is being saved simultaneously or if saves occur too frequently, Roblox can drop some packages. This occasionally led to data loss for players, particularly if they changed maps right after an autosave. Additionally, players who left the game before their data was fully loaded could experience data loss, as it sometimes resulted in overwriting older data. </p>
        
        <p> In Sweet Sour's discord server the community can ask for help in recovering their lost items and currencies that occurred due to data loss. The saving system does not have backups so rollbacks are not possible therefore this has to be done manually. </p>
        
        <div id="codebox-buttonDiv">
            <button class="codebox-button" onclick="HideShowCodebox('codebox')"> Saving code snippet </button>
        </div>
        <div id="codebox" style="max-height: 0px;">
            <pre><code class="lua hljs">
        -- Saving data
        local playerServerStorage = playerDataServerStorage:FindFirstChild(tostring(playerID))
        if not playerServerStorage then
            warn("NO PLAYER SERVERSTORAGE FOUND, CANNOT SAVE?!")
            return false
        end
    
        -- SAVE MONEY, BOOSTERS AND TOTAL DISTANCE
        local cleanLocalPlayerData = DeepCopyTable(cleanPlayerData)
        local playerSaveStats = cleanLocalPlayerData
        local playerStatsServerStorage = playerServerStorage:FindFirstChild("PlayerStats")
        if playerStatsServerStorage then
            local playerServerMoney = playerStatsServerStorage:FindFirstChild("Money")
            if playerServerMoney then
                playerSaveStats.money = math.floor(playerServerMoney.Value)
            end
            local playerServerMoneyBooster = playerStatsServerStorage:FindFirstChild("MoneyBooster")
            if playerServerMoneyBooster then
                playerSaveStats.moneyBoost = math.floor(playerServerMoneyBooster.Value)
            end
            local playerServerHealthBooster = playerStatsServerStorage:FindFirstChild("HealthBooster")
            if playerServerHealthBooster then
                playerSaveStats.healthBoost = math.floor(playerServerHealthBooster.Value)
            end
            
            local playerServerEventCurrency = playerStatsServerStorage:FindFirstChild("EventCurrency")
            if playerServerEventCurrency then
                for _, childCurrency in ipairs(playerServerEventCurrency:GetChildren()) do
                    playerSaveStats["eventCurrency"][childCurrency.Name] = childCurrency.Value
                end
            end
    
            local successSavedPlayerStats, errorMessageSavedPlayerStats = pcall(function()
                playerStatsDatastore:UpdateAsync(playerID .. "_playerData", function(oldValue)
                    local newValue = oldValue or cleanLocalPlayerData
                    newValue = playerSaveStats
                    print("NEWVALUE PLAYERDATA: ", newValue)
                    return newValue
                end)
            end)
            if successSavedPlayerStats then
    
            else
                warn("Error saving player stats data: ", errorMessageSavedPlayerStats)
                return false
            end
        end
        -- SAVE TOTAL DISTANCE AT LEAVE
        local playerTotalDistanceServer = playerStatsServerStorage:FindFirstChild("TotalDistance")
        if playerTotalDistanceServer then
            local successSavedTotalDistance, errorMessageSavedTotalDistance = pcall(function()
                playerTotalDistanceDatastore:UpdateAsync(playerID .. "_totalDistance", function(oldValue)
                    local newValue = oldValue or starterTotalDistance
                    newValue = math.floor(playerTotalDistanceServer.Value)
                    print("NEWVALUE TOTALDISTANCE: ", newValue)
                    return newValue
                end)
            end)
            if successSavedTotalDistance then
    
            else
                warn("Error saving player stats data: ", errorMessageSavedTotalDistance)
                return false
            end
        end
            </code></pre>
        </div>
        
        <h2>Cheaters</h2>
        <p> Cheaters were a problem I had no experience with and quickly learned that they work fast. </p>
        <p>Roblox default characters are client authorized, making it easy for players to use hacks like flying and teleporting. They can also send events with modified parameters. At the time of release, I wasn't aware that characters sitting in Roblox's premade seats would teleport the entire structure with them because sitting in a seat gives the player ownership of that structure. Hackers exploited this to gain significant distance by teleporting, which posed a challenge for gameplay balance. </p>
        
        <p> 
            Another flaw at release was how the game handled purchases using ingame currency. When a player requested a purchase, they sent an event with the part name and price to the server, which only checked if they had enough of the correct currency without validating the request. This allowed players to send negative numbers to gain currency. Fortunately, this issue was addressed shortly after it was discovered, and it has not been a problem since. </p>
        <p></p>
        <div id="codebox-buttonDiv">
            <button class="codebox-button" onclick="HideShowCodebox('codebox2')"> Speed/Teleport hacker check </button>
        </div>
        <div id="codebox2" style="max-height: 0px;">
            <pre><code class="lua hljs">
        ---- Cheater checks ----
        local newPos = primaryPart.Position

        local velocity = (newPos - oldPos) / deltaTime

        -- set old pos to newpos AFTER velocity calculation
        oldPos = newPos

        -- Speed is in studs per second, stud/s
        speed = velocity.Magnitude

        -- Kick cheating players
        if speed > speedToKick and primaryPart:GetAttribute("Preparing") ~= true then
            EndRaceEarly(player)
            player:Kick("Kicked for speed hacking")
        end
            </code></pre>
        </div>
        <p></p>
    </div>
</div>
<!-- FOOTER -->
<footer>
    <div>
        <p></p>
    </div>
</footer>
<!-- END FOOTER -->
</body>
</html>